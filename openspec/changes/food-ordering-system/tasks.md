## 1. 项目初始化

- [x] 1.1 创建 monorepo 项目结构 (apps/user-app, apps/merchant-app, apps/server, packages/shared)
- [x] 1.2 初始化 pnpm workspace 配置
- [x] 1.3 创建 C 端小程序 UniApp 项目 (apps/user-app)
- [x] 1.4 创建 B 端小程序 UniApp 项目 (apps/merchant-app)
- [x] 1.5 创建服务端 Koa 项目 (apps/server)
- [x] 1.6 配置 TypeScript、ESLint、Prettier
- [x] 1.7 创建 shared 包，定义公共类型

## 2. 数据库设计与初始化

- [x] 2.1 安装配置 Prisma ORM
- [x] 2.2 创建 users 用户表 schema
- [x] 2.3 创建 merchants 商家表 schema
- [x] 2.4 创建 menus 菜谱表 schema
- [x] 2.5 创建 orders 订单表 schema
- [x] 2.6 创建 order_items 订单详情表 schema
- [x] 2.7 创建 payments 支付记录表 schema
- [x] 2.8 创建数据库索引
- [ ] 2.9 运行数据库迁移

## 3. 服务端 - 基础架构

- [x] 3.1 配置 Koa 服务器和中间件 (cors, bodyparser, logger)
- [x] 3.2 实现统一响应格式和错误处理
- [x] 3.3 实现 JWT 认证中间件
- [x] 3.4 实现权限校验中间件 (用户/商家角色区分)
- [x] 3.5 配置路由结构

## 4. 服务端 - 用户认证模块

- [x] 4.1 实现微信 code 换取 openid 工具函数
- [x] 4.2 实现 POST /api/v1/auth/login 用户登录接口
- [x] 4.3 实现 POST /api/v1/auth/admin/login 商家登录接口
- [x] 4.4 实现 Token 刷新逻辑

## 5. 服务端 - 菜单模块

- [x] 5.1 实现 GET /api/v1/menu/today 获取今日菜单接口
- [x] 5.2 实现 GET /api/v1/menu/history 获取历史菜谱接口
- [x] 5.3 实现 POST /api/v1/admin/menu 创建菜品接口
- [x] 5.4 实现 PUT /api/v1/admin/menu/:id 更新菜品接口
- [x] 5.5 实现 DELETE /api/v1/admin/menu/:id 删除菜品接口
- [x] 5.6 实现 GET /api/v1/admin/menu/history 商家获取历史菜谱接口

## 6. 服务端 - 订单模块

- [x] 6.1 实现 POST /api/v1/order/create 创建订单接口 (含库存校验、截止时间校验)
- [x] 6.2 实现库存扣减逻辑 (乐观锁防并发)
- [x] 6.3 实现 GET /api/v1/order/list 用户订单列表接口
- [x] 6.4 实现 GET /api/v1/order/:id 订单详情接口
- [x] 6.5 实现 GET /api/v1/admin/order/today 商家今日订单接口
- [x] 6.6 实现 GET /api/v1/admin/order/stats 订单统计接口
- [x] 6.7 实现 GET /api/v1/admin/order/export 导出 Excel 接口

## 7. 服务端 - 支付模块

- [x] 7.1 集成微信支付 SDK
- [x] 7.2 实现 POST /api/v1/order/:id/pay 发起支付接口
- [x] 7.3 实现 POST /api/v1/payment/notify 支付回调接口
- [x] 7.4 实现支付状态更新逻辑
- [x] 7.5 实现订单超时取消定时任务

## 8. 服务端 - 文件上传模块

- [x] 8.1 配置腾讯云 COS SDK
- [x] 8.2 实现 POST /api/v1/upload/image 图片上传接口
- [x] 8.3 实现文件类型校验和大小限制

## 9. C 端小程序 - 基础架构

- [x] 9.1 配置 UniApp 项目和微信小程序相关配置
- [x] 9.2 创建全局状态管理 (Pinia)
- [x] 9.3 封装请求工具函数 (含 Token 自动携带)
- [x] 9.4 创建 TabBar 导航结构 (首页/订单/我的)

## 10. C 端小程序 - 登录模块

- [x] 10.1 实现微信授权登录流程
- [x] 10.2 实现登录状态持久化
- [x] 10.3 实现 Token 刷新逻辑

## 11. C 端小程序 - 首页模块

- [x] 11.1 实现首页布局 (倒计时 + 菜单列表)
- [x] 11.2 实现今日菜单展示组件
- [x] 11.3 实现截止时间倒计时组件
- [x] 11.4 实现菜品卡片组件 (图片/名称/价格/库存)
- [x] 11.5 实现售罄状态显示

## 12. C 端小程序 - 购物车模块

- [x] 12.1 实现购物车状态管理
- [x] 12.2 实现添加/删除菜品功能
- [x] 12.3 实现数量修改功能
- [x] 12.4 实现库存校验提示
- [x] 12.5 实现购物车浮动入口组件

## 13. C 端小程序 - 订单模块

- [x] 13.1 实现订单确认页面
- [x] 13.2 实现提交订单功能 (含截止时间校验)
- [x] 13.3 实现支付页面
- [x] 13.4 集成微信支付功能
- [x] 13.5 实现支付结果页面

## 14. C 端小程序 - 历史订单模块

- [x] 14.1 实现订单列表页面
- [x] 14.2 实现订单卡片组件
- [x] 14.3 实现订单详情页面
- [x] 14.4 实现待支付订单继续支付功能

## 15. C 端小程序 - 个人中心模块

- [x] 15.1 实现个人中心页面
- [x] 15.2 实现用户信息展示
- [x] 15.3 实现昵称修改功能
- [x] 15.4 实现订阅消息设置

## 16. B 端小程序 - 基础架构

- [x] 16.1 配置 UniApp 项目和微信小程序相关配置
- [x] 16.2 创建全局状态管理 (Pinia)
- [x] 16.3 封装请求工具函数
- [x] 16.4 创建 TabBar 导航结构 (首页/菜谱/订单/设置)

## 17. B 端小程序 - 登录模块

- [x] 17.1 实现微信扫码登录
- [x] 17.2 实现账号密码登录页面
- [x] 17.3 实现登录状态持久化

## 18. B 端小程序 - 首页模块

- [x] 18.1 实现首页布局 (今日统计 + 待处理订单)
- [x] 18.2 实现今日数据卡片组件
- [x] 18.3 实现待处理订单列表组件

## 19. B 端小程序 - 菜谱管理模块

- [x] 19.1 实现菜谱管理页面
- [x] 19.2 实现菜品列表组件
- [x] 19.3 实现添加菜品表单 (含图片上传)
- [x] 19.4 实现编辑菜品功能
- [x] 19.5 实现删除菜品功能
- [x] 19.6 实现设置截止时间功能

## 20. B 端小程序 - 订单管理模块

- [x] 20.1 实现订单列表页面
- [x] 20.2 实现订单筛选功能 (按状态)
- [x] 20.3 实现订单详情页面
- [x] 20.4 实现菜品汇总统计页面
- [x] 20.5 实现导出订单功能

## 21. B 端小程序 - 历史记录模块

- [x] 21.1 实现历史菜谱页面
- [x] 21.2 实现菜品销量统计展示

## 22. B 端小程序 - 通知推送模块

- [x] 22.1 实现推送通知页面
- [x] 22.2 实现选择推送类型功能
- [x] 22.3 实现自定义消息输入
- [x] 22.4 对接微信订阅消息接口

## 23. 测试与部署

- [x] 23.1 编写服务端单元测试
- [x] 23.2 编写服务端集成测试
- [x] 23.3 配置服务端 Docker 部署
- [x] 23.4 配置 CI/CD 流程
- [ ] 23.5 准备小程序审核材料
- [ ] 23.6 提交 C 端小程序审核
- [ ] 23.7 提交 B 端小程序审核
