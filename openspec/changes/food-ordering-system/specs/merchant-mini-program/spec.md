## ADDED Requirements

### Requirement: 商家登录
商家 SHALL 能够通过微信扫码或账号密码登录 B 端小程序。

#### Scenario: 微信扫码登录
- **WHEN** 商家使用微信扫描登录二维码
- **THEN** 系统验证商家身份，登录成功后进入首页

#### Scenario: 账号密码登录
- **WHEN** 商家输入正确的账号和密码
- **THEN** 系统验证成功，登录后进入首页

#### Scenario: 登录失败
- **WHEN** 商家输入错误的账号或密码
- **THEN** 系统提示"账号或密码错误"

---

### Requirement: 菜谱管理 - 上传菜品
商家 SHALL 能够上传今日菜谱，包括菜名、图片、价格、库存、截止时间。

#### Scenario: 上传新菜品
- **WHEN** 商家填写菜品信息并点击"添加"
- **THEN** 系统保存菜品，显示在今日菜谱列表中

#### Scenario: 上传菜品图片
- **WHEN** 商家选择本地图片上传
- **THEN** 系统将图片上传至云存储，返回图片 URL

#### Scenario: 必填项校验
- **WHEN** 商家未填写必填项（菜名、价格、库存）
- **THEN** 系统提示"请填写完整信息"

---

### Requirement: 菜谱管理 - 编辑菜品
商家 SHALL 能够编辑已上传的菜品信息。

#### Scenario: 修改菜品信息
- **WHEN** 商家修改菜品的价格或库存并保存
- **THEN** 系统更新菜品信息

#### Scenario: 删除菜品
- **WHEN** 商家删除某个菜品
- **THEN** 系统移除该菜品，用户端不再显示

---

### Requirement: 设置截止时间
商家 SHALL 能够设置每日点餐的截止时间。

#### Scenario: 设置今日截止时间
- **WHEN** 商家设置截止时间为 11:00
- **THEN** 用户在 11:00 后无法提交订单

#### Scenario: 修改截止时间
- **WHEN** 商家修改截止时间
- **THEN** 系统更新截止时间，用户端倒计时同步更新

---

### Requirement: 订单管理 - 查看订单
商家 SHALL 能够查看当日所有订单。

#### Scenario: 查看今日订单列表
- **WHEN** 商家进入订单管理页面
- **THEN** 系统展示今日所有订单，包括用户信息、菜品、数量、支付状态

#### Scenario: 筛选订单
- **WHEN** 商家按支付状态筛选订单
- **THEN** 系统展示符合条件的订单

---

### Requirement: 订单管理 - 订单汇总
商家 SHALL 能够查看今日订单的汇总统计。

#### Scenario: 查看菜品汇总
- **WHEN** 商家点击"菜品汇总"
- **THEN** 系统展示每个菜品的总订购数量

#### Scenario: 查看收入统计
- **WHEN** 商家查看今日统计
- **THEN** 系统展示今日总订单数、已支付订单数、总收入

---

### Requirement: 导出订单数据
商家 SHALL 能够导出订单数据为 Excel 文件。

#### Scenario: 导出今日订单
- **WHEN** 商家点击"导出 Excel"
- **THEN** 系统生成包含所有订单明细的 Excel 文件并下载

---

### Requirement: 历史菜谱查看
商家 SHALL 能够查看历史菜谱及销量数据。

#### Scenario: 查看历史菜谱
- **WHEN** 商家进入历史菜谱页面
- **THEN** 系统展示过去的菜谱列表，按日期排序

#### Scenario: 查看菜品销量
- **WHEN** 商家查看某日菜谱详情
- **THEN** 系统展示该日每个菜品的销售数量

---

### Requirement: 推送通知
商家 SHALL 能够向用户推送消息通知。

#### Scenario: 推送菜品售罄通知
- **WHEN** 商家选择"推送售罄通知"
- **THEN** 系统向所有订阅用户发送通知

#### Scenario: 推送自定义通知
- **WHEN** 商家输入通知内容并发送
- **THEN** 系统向目标用户发送自定义消息
